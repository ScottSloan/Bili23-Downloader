# 自定义下载文件名&自动分类
**最低支持版本：1.63.0**

<img src="https://s21.ax1x.com/2025/06/19/pVVtrtO.png" alt="自定义下载文件名">

*图1 自定义下载文件名对话框示意图*

目前程序支持下载的视频分为三类：投稿视频、剧集（番剧、电影等）和课程，用户可根据需要为不同类型的视频设置不同的文件名模板。

模板生效范围：  
`所有类型`：对三种类型的视频都生效  
`投稿视频\剧集\课程`：对相应类型的视频生效  
`默认`：未设置相应类型的文件名模板时所使用的默认值（保留模板，不可删除）  

:::tip  
当为不同类型的视频设置了不同的文件名模板时，优先级如下：
* 如果设置了`所有类型`的模板，则对所有视频生效；
* 如果设置了特定类型的模板（如`投稿视频`），则对该类型生效；
* 如果未设置任何模板，则使用`默认`模板（不可删除）。
:::

<img src="https://s21.ax1x.com/2025/06/19/pVVtc1H.png" alt="添加字段">

*图2 添加字段示意图*

在文件名前方添加路径分隔符（`\`或`/`），即可添加子目录，满足相应字段的视频将会被放置到同一个文件夹中，达到自动分类的效果。

示例：  
`\{series_title}\{title}`，划分一级子目录，下载番剧时，以番剧的系列名称分类。  
`\{up_name}\{pubtime:%Y-%m-%d}\{zone}\{title}`，划分多级子目录，下载投稿视频时，首先根据 UP 主名称分类，然后以视频发布时间分类，最后以视频分区分类。  

当设置了子目录时，如果目录部分出现空白字段，其目录层级将会发生变化。
例如：设置文件名模板为 `\收藏夹\{list_title}\{title}`，当 `{list_title}` 字段为空时，最终将会下载到下载目录中的 `收藏夹` 子目录中。

可用的字段列表如下：

| 字段名称                  | 说明                   | 示例                         | 生效范围（包括子目录层级）|
| ---                      | ---                    | ---                          | ---                  |
| \{time:%H-%M-%S\}        | 当前时间（%H-%M-%S）    | 15-04-29                     | 投稿视频、剧集、课程   |
| \{timestamp\}            | 当前时间戳              | 1742534946                   | 投稿视频、剧集、课程   |
| \{pubtime:%Y-%m-%d\}     | 视频发布时间（%Y-%m-%d） | 2022-10-30                  | 投稿视频、剧集、课程   |
| \{pubtimestamp\}         | 视频发布时间戳           | 1667061000                  | 投稿视频、剧集、课程   |
| \{number\}               | 序号                    | 1                           | 投稿视频、剧集、课程   |
| \{zero_padding_number\}  | 补零序号                | 01                           | 投稿视频、剧集、课程   |
| \{zone\}                 | 视频分区                | 综合                         | 投稿视频              |
| \{subzone\}              | 视频子分区              | 动漫剪辑                      | 投稿视频              |
| \{area\}                 | 地区                   | 日本                         | 剧集                  |
| \{title\}                | 视频标题                | 第1话 孤独的转机             | 投稿视频、剧集、课程   |
| \{section_title\}        | 章节标题                | 参见下方说明               | 投稿视频、剧集、课程     |
| \{part_title\}           | 分节标题                | 参见下方说明               | 投稿视频                |
| \{collection_title\}     | 视频合集标题             | 参见下方说明               | 投稿视频               |
| \{series_title\}         | 剧集名称、课程名称       | 《孤独摇滚》                  | 剧集、课程           |
| \{aid\}                  | 视频 av 号             | 944573356                   | 投稿视频、剧集、课程    |
| \{bvid\}                 | 视频 BV 号             | BV1yW4y1j7Ft                | 投稿视频、剧集、课程    |
| \{cid\}                  | 视频 cid               | 875212290                   | 投稿视频、剧集、课程    |
| \{ep_id\}                | 视频 ep_id             | 693247                       | 剧集、课程            |
| \{season_id\}            | 视频 season_id         | 43164                        | 剧集、课程            |
| \{media_id\}             | 视频 media_id          | 28339735                     | 剧集                  |
| \{video_quality\}        | 视频清晰度              | 超清 4K                      | 投稿视频、剧集、课程   |
| \{audio_quality\}        | 音质                   | Hi-Res 无损                 | 投稿视频、剧集、课程    |
| \{video_codec\}          | 视频编码               | H265                         | 投稿视频、剧集、课程   |
| \{duration\}             | 视频时长，单位为秒      | 256                         | 投稿视频、剧集、课程    |
| \{up_name\}              | UP 主名称              | 哔哩哔哩番剧                  | 投稿视频、剧集、课程   |
| \{up_mid\}               | UP 主 mid              | 928123                      | 投稿视频、剧集、课程   |

## 部分字段说明
### 章节标题&分节标题
对于投稿视频，只有分P和合集类型的视频支持设置章节标题，如图 3 所示。  

<img src="https://s21.ax1x.com/2025/06/19/pVVYnZ6.png" alt="投稿视频">

*图3 投稿视频合集中章节标题、分节标题说明示意图*

对于剧集，只支持设置章节标题，如图 4 所示。  

<img src="https://s21.ax1x.com/2025/06/19/pVVYao8.png" alt="剧集">

*图4* 剧集中章节标题说明示意图

在程序剧集列表中的显示效果如图 5 所示。  

<img src="https://s21.ax1x.com/2025/06/19/pVVY0Jg.png" alt="投稿视频">

*图5* 程序中剧集列表显示效果

:::tip
在程序中双击列表中的任意字段，可快速将其添加到当前模板的末尾。  

时间字段中格式可自定义，示例：
* `%Y-%m-%d` -> 输出 `2025-06-11`
* `%H-%M-%S` -> 输出 `11-26-45`
* `%Y-%m-%d %H-%M` -> 输出 `2025-06-11 11-26`

其他可用的格式化符号请参考表 1。
:::

表 1 时间字段可用的格式化符号  

| 符号 | 解释 |
| --- | --- |
| %a | 本地简化星期名称 |
| %A | 本地完整星期名称 |
| %b | 本地简化的月份名称 |
| %B | 本地完整的月份名称 |
| %c | 本地相应的日期表示和时间表示 |
| %d | 月内中的一天（0-31）|
| %f | 微秒（000000-999999）|
| %H | 24小时制小时数（0-23）|
| %I | 12小时制小时数（01-12）|
| %j | 年内的一天（001-366）|
| %m | 月份（01-12）|
| %M | 分钟数（00-59）|
| %p | 本地A.M.或P.M.的等价符 |
| %S | 秒（00-59）|
| %U | 一年中的星期数（00-53）星期天为星期的开始 |
| %w | 星期（0-6），星期天为星期的开始 |
| %W | 一年中的星期数（00-53）星期一为星期的开始 |
| %x | 本地相应的日期表示 |
| %X | 本地相应的时间表示 |
| %y | 两位数的年份表示（00-99）|
| %Y | 四位数的年份表示（0000-9999）|
| %z | UTC 时区偏移（+HHMM，例如+0800）|
| %Z | 当前时区的名称 |
| %% | %号本身 |